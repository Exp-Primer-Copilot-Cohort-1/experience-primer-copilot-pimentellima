config:
  target: "http://localhost:3333"
  phases:
    - name: "Fase Inicial Carga Leve"
      arrivalRate: 10
      duration: 300
      rampTo: 30
      maxVusers: 1000
    - name: "Fase de Carga Moderada"
      arrivalRate: 30
      duration: 300
      rampTo: 50
      maxVusers: 1000
    - name: "Fase de Carga Significativa"
      arrivalRate: 30
      duration: 300
      rampTo: 100
      maxVusers: 1000
    - name: "Fase de Sobrecarga"
      arrivalRate: 30
      duration: 120
      rampTo: 150
      maxVusers: 1000
    - name: "Fase Final Sobrecarga"
      arrivalRate: 75
      duration: 60
      rampTo: 150

before:
  flow:
    - post:
        url: "/sessions"
        json:
          email: "nediaulogin@hotmail.com"
          password: "123456"
        capture:
          json: $.token.token
          as: token
        expect:
          - statusCode: 200
    - log: "Token capturado: {{ token }}"

scenarios:
  - name: "busca de unidades por email"
    weight: 2
    flow:
      - get:
          url: "/unities?name=myUnity"
          headers:
            Authorization: "Bearer {{ token }}"

  - name: "Busca de todos os procedimentos da unidade"
    weight: 2
    flow:
      - get:
          url: "/procedures"
          headers:
            Content-Type: "application/json"
            authorization: "Bearer {{ token }}"

  - name: "Busca de respostas por unidade"
    weight: 2
    flow:
      - get:
          url: "/answers"
          headers:
            Authorization: "Bearer {{ token }}"

  - name: "Autenticação do usuário"
    weight: 2
    flow:
      - get:
          url: "/sessions/user"
          headers:
            Authorization: "Bearer {{ token }}"

  # nao funciona
  # - name: "Busca de todos os profissionais da unidade"
  #   weight: 2
  #   flow:
  #     - get:
  #         url: "/users/profs"
  #         headers:
  #           Authorization: "Bearer {{ token }}"
  # nao funciona
  # - name: "UserControllerV2.findAllUsersSecs"
  #   weight: 2
  #   flow:
  #     - get:
  #         url: "/users/secs"
  #         headers:
  #           Authorization: "Bearer {{ token }}"

  - name: "Busca de planos de saúde da unidade do usuário"
    weight: 2
    flow:
      - get:
          url: "/health-insurances"
          headers:
            Authorization: "Bearer {{ token }}"

  - name: "Busca de todos os agendamentos por unidade"
    weight: 2
    flow:
      - get:
          url: "/schedule-block"
          headers:
            Authorization: "Bearer {{ token }}"

  - name: "Busca de estoque da unidade"
    weight: 2
    flow:
      - get:
          url: "/stocks"
          headers:
            Authorization: "Bearer {{ token }}"

  - name: "Busca de todas as categorias da unidade autenticada"
    weight: 2
    flow:
      - get:
          url: "/categories"
          headers:
            Authorization: "Bearer {{ token }}"

  - name: "Lista de parceiros da unidade autenticada"
    weight: 2
    flow:
      - get:
          url: "/partners"
          headers:
            Authorization: "Bearer {{ token }}"

  - name: "Busca todos os formularios do usuário autenticado"
    weight: 2
    flow:
      - get:
          url: "/forms"
          headers:
            Authorization: "Bearer {{ token }}"

  - name: "Busca de todas as atividades de acordo com o tipo de usuário autenticado"
    weight: 3
    flow:
      - get:
          url: "/activities"
          headers:
            Authorization: "Bearer {{ token }}"

  - name: "Busca de todas as atividades a espera de aprovação"
    weight: 3
    flow:
      - get:
          url: "/activities/await"
          headers:
            Authorization: "Bearer {{ token }}"
  - name: "Busca de todas as atividades pendentes de acordo com o tipo de usuário autenticado"
    weight: 2
    flow:
      - get:
          url: "/activities/pending"
          headers:
            Authorization: "Bearer {{ token }}"

  - name: "Busca de prescrições do profissional autenticado"
    weight: 2
    flow:
      - get:
          url: "/prescriptions"
          headers:
            Authorization: "Bearer {{ token }}"

  - name: "Busca de atestados médicos com base no nome do paciente"
    weight: 2
    flow:
      - get:
          url: "/medical-certificate"
          headers:
            Authorization: "Bearer {{ token }}"

  - name: "Busca de todos os pagamentos dos Profissionais"
    weight: 2
    flow:
      - get:
          url: "/payment-participations"
          headers:
            Authorization: "Bearer {{ token }}"
  - name: "busca dos centros de custo ativos da unidade do usuário logado"
    weight: 2
    flow:
      - get:
          url: "/cost-centers"
          headers:
            Authorization: "Bearer {{ token }}"

  - name: "Busca por uma lista de transações"
    weight: 3
    flow:
      - get:
          url: "/transactions"
          headers:
            Authorization: "Bearer {{ token }}"

  - name: "Busca por todos os feriados de uma unidade"
    weight: 2
    flow:
      - get:
          url: "/holidays"
          headers:
            Authorization: "Bearer {{ token }}"

  - name: "Busca pelos faturamentos do ano atual de uma unidade"
    weight: 2
    flow:
      - get:
          url: "/revenues"
          headers:
            Authorization: "Bearer {{ token }}"

  - name: "Busca do censo por mês e unidade"
    weight: 2
    flow:
      - get:
          url: "/census"
          headers:
            Authorization: "Bearer {{ token }}"
  - name: "Busca do censo de pagamentos por mês e unidade"
    weight: 2
    flow:
      - get:
          url: "/census/payments"
          headers:
            Authorization: "Bearer {{ token }}"
  - name: "Busca do censo de pagamentos por plano de saúde"
    weight: 2
    flow:
      - get:
          url: "/census/health-insurances"
          headers:
            Authorization: "Bearer {{ token }}"
  - name: "Busca do censo de atividades por profissional e mês"
    weight: 2
    flow:
      - get:
          url: "/census/activities-days-month"
          headers:
            Authorization: "Bearer {{ token }}"
  - name: "Busca do censo de pagamentos por forma de pagamento"
    weight: 2
    flow:
      - get:
          url: "/census/payments-by-forms"
          headers:
            Authorization: "Bearer {{ token }}"
  - name: "Busca do censo de atividades por profissional"
    weight: 2
    flow:
      - get:
          url: "/census/activities-prof-by-profs"
          headers:
            Authorization: "Bearer {{ token }}"
  - name: "Busca do censo de pagamentos por parceiro"
    weight: 2
    flow:
      - get:
          url: "/census/payments-by-partners"
          headers:
            Authorization: "Bearer {{ token }}"
  - name: "Busca do censo de pagamentos por profissional"
    weight: 2
    flow:
      - get:
          url: "/census/payments-by-profs"
          headers:
            Authorization: "Bearer {{ token }}"
  - name: "Busca do censo de participação em pagamentos por profissional"
    weight: 2
    flow:
      - get:
          url: "/census/payments-participations"
          headers:
            Authorization: "Bearer {{ token }}"
  - name: "Busca do censo de receitas por atividades"
    weight: 2
    flow:
      - get:
          url: "/census/revenues-activities"
          headers:
            Authorization: "Bearer {{ token }}"
